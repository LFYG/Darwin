Build openssl for IOS

CommandLineTools + SDK

Configure:
enable-ec_nistp_64_gcc_128 darwin64-x86_64-cc 選項只能用於 64-bit (x86_64 arm64)

export SDKROOT="$HOME/SDKs/iPhoneOS6.1.sdk"
export CC="$(xcrun -f gcc) -arch armv7"
export CXX="$(xcrun -f g++) -arch armv7"
export LD=$(xcrun -f ld)
export AR=$(xcrun -f ar)
export AS=$(xcrun -f as)
export NM=$(xcrun -f nm)
export RANLIB=$(xcrun -f ranlib)
export CFLAGS="-I$SDKROOT/usr/include/ -arch armv7"
export LDFLAGS="-L$SDKROOT/usr/lib/ -arch armv7"
export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS

cd src
# 0.98/1.0.x
./Configure --prefix=/usr/local --openssldir=/etc/openssl iphoneos-cross no-ssl2 zlib-dynamic shared enable-ms

# Patch:
sed -e 's/$(CROSS_TOP)\/SDKs\/$(CROSS_SDK)/$(SDKROOT)/g' Makefile > Makefile2
mv Makefile2 Makefile

make depend
make
make install
